<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5129097020907805" crossorigin="anonymous"></script>
    
    <meta charset="UTF-8" />
    <title>Tell My Location | The Best "Where Am I?" Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Instantly find your exact location, address, and coordinates. The fastest safety tool with One-Tap SOS and nearest emergency services.">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Tell My Location",
      "url": "https://tellmylocation.com",
      "applicationCategory": "Utility",
      "featureList": "GPS Coordinates, SOS, Weather, Nearest Police"
    }
    </script>

    <style>
        :root {
            --bg: #02030a;
            --card: #0b0e14;
            --accent: #ff0044;
            --neon-blue: #00e0ff;
            --sos-red: #ff3131;
            --text-main: #ffffff;
            --text-soft: #94a3b8;
            --border: rgba(255, 255, 255, 0.08);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: radial-gradient(circle at top, #1e293b 0, #02030a 45%, #000 100%);
            color: var(--text-main);
            min-height: 100vh;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .shell { width: 100%; max-width: 800px; display: flex; flex-direction: column; gap: 16px; }

        /* --- HEADER --- */
        .brand { text-align: center; margin: 10px 0; }
        .brand h1 { font-size: 26px; font-weight: 800; letter-spacing: -1px; margin-bottom: 4px; }
        .brand h1 span { color: var(--accent); }
        .tagline { color: var(--text-soft); font-size: 13px; }

        /* --- CARD STYLES --- */
        .card {
            background: var(--card);
            border-radius: 20px;
            border: 1px solid var(--border);
            padding: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
        }

        /* --- ADDRESS BOX (Top) --- */
        .address-box {
            background: rgba(0, 224, 255, 0.03);
            border: 1px solid rgba(0, 224, 255, 0.15);
            padding: 16px;
            border-radius: 14px;
            margin-bottom: 16px;
            text-align: center;
            position: relative;
        }
        .address-box h2 { font-size: 10px; color: var(--neon-blue); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 6px; }
        #full-address { font-size: 15px; font-weight: 600; line-height: 1.4; color: #fff; padding-right: 25px; }
        
        .copy-addr-btn {
            position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
            background: transparent; border: none; color: var(--neon-blue);
            font-size: 18px; cursor: pointer; padding: 5px;
        }

        /* --- MAP --- */
        #map { width: 100%; height: 300px; border-radius: 16px; border: 1px solid var(--border); margin-bottom: 16px; z-index: 1; }

        /* --- DATA GRID --- */
        .data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; margin-bottom: 20px; }
        .data-item {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            padding: 12px;
            border-radius: 12px;
            text-align: left;
        }
        .label { font-size: 10px; color: var(--text-soft); text-transform: uppercase; margin-bottom: 4px; }
        .value { font-size: 15px; font-weight: 700; color: #fff; }
        .sub-value { font-size: 11px; color: var(--neon-blue); margin-top: 2px; }

        /* --- NEARBY --- */
        .nearby-header { font-size: 12px; text-transform: uppercase; color: var(--text-soft); margin-bottom: 8px; letter-spacing: 0.5px; }
        .nearby-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        @media(max-width: 600px) { .nearby-list { grid-template-columns: 1fr; } }
        
        .nearby-item {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            padding: 10px;
            border-radius: 10px;
        }
        .nearby-type { font-size: 9px; color: var(--accent); font-weight: 800; text-transform: uppercase; }
        .nearby-name { font-size: 12px; font-weight: 600; margin: 3px 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .nearby-dist { font-size: 10px; color: var(--neon-blue); }

        /* --- BUTTONS --- */
        .btn-stack { display: flex; flex-direction: column; gap: 10px; margin-top: 25px; }
        .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

        .btn {
            border: none; border-radius: 12px; padding: 14px; font-weight: 700; 
            cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 6px;
            transition: 0.2s;
        }
        
        /* SOS Pulse Animation */
        .btn-sos { 
            background: var(--sos-red); color: white; width: 100%; font-size: 16px;
            box-shadow: 0 0 15px rgba(255, 49, 49, 0.4);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 49, 49, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 49, 49, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 49, 49, 0); }
        }

        .btn-primary { background: var(--accent); color: white; }
        .btn-ghost { background: rgba(255,255,255,0.05); color: white; border: 1px solid var(--border); }
        .btn-coffee { background: #32ff7e; color: #000; font-weight: 800; }
        
        .btn:active { transform: scale(0.97); }

        /* --- FOOTER & TRUST --- */
        .trust-badge { font-size: 10px; color: #555c6e; text-align: center; margin-top: 15px; }
        footer { margin-top: 30px; text-align: center; font-size: 11px; color: var(--text-soft); padding-bottom: 20px; }
        footer a { color: var(--text-soft); text-decoration: none; margin: 0 5px; }
    </style>
</head>
<body>

<div class="shell">
    <header class="brand">
        <h1>TELLMY<span>LOCATION</span>.COM</h1>
        <p class="tagline">The fastest "Where am I?" tool on the internet.</p>
    </header>

    <main class="card">
        <div class="address-box">
            <h2>Current Address</h2>
            <div id="full-address">Acquiring GPS Signal...</div>
            <button class="copy-addr-btn" id="copy-addr" title="Copy Address">‚ßâ</button>
        </div>

        <div id="map"></div>

        <div class="data-grid">
            <div class="data-item">
                <div class="label">GPS Coordinates</div>
                <div class="value"><span id="lat-val">‚Äî</span>, <span id="lng-val">‚Äî</span></div>
                <div class="sub-value" id="accuracy-val">Waiting...</div>
            </div>
            <div class="data-item">
                <div class="label">Weather</div>
                <div class="value" id="temp-display">‚Äî</div>
                <div class="sub-value" id="wind-display">Wind: ‚Äî</div>
            </div>
            <div class="data-item">
                <div class="label">Network IP</div>
                <div class="value" id="ip-val" style="font-size:14px">‚Äî</div>
                <div class="sub-value" id="isp-val">ISP: ‚Äî</div>
            </div>
        </div>

        <div class="nearby-header">üìç Nearest Emergency Services</div>
        <div class="nearby-list" id="nearby-results">
            <div class="nearby-item">Searching...</div>
            <div class="nearby-item">Searching...</div>
            <div class="nearby-item">Searching...</div>
        </div>

        <div class="btn-stack">
            <button class="btn btn-sos" id="sos-btn">üö® ONE-TAP SOS SHARE</button>
            <div class="btn-row">
                <button class="btn btn-primary" id="refresh-btn">‚ü≥ Refresh Data</button>
                <button class="btn btn-ghost" id="copy-coords-btn">‚ßâ Copy Lat/Long</button>
            </div>
            <button class="btn btn-coffee" onclick="window.open('https://buymeacoffee.com/donshehab')">‚òï Buy Me a Coffee</button>
        </div>

        <p class="trust-badge">üîí <strong>Secure:</strong> Location is processed locally. We do not store your data.</p>
    </main>

    <footer>
        <div style="margin-bottom: 10px;">
            <a href="#">Privacy</a> ‚Ä¢ <a href="#">Terms</a> ‚Ä¢ <a href="#">Contact</a>
        </div>
        ¬© 2026 TellMyLocation.com ‚Ä¢ Gold Master Build
    </footer>
</div>

<script>
    // --- UI Elements ---
    const els = {
        lat: document.getElementById("lat-val"),
        lng: document.getElementById("lng-val"),
        addr: document.getElementById("full-address"),
        acc: document.getElementById("accuracy-val"),
        temp: document.getElementById("temp-display"),
        wind: document.getElementById("wind-display"),
        ip: document.getElementById("ip-val"),
        isp: document.getElementById("isp-val"),
        nearby: document.getElementById("nearby-results")
    };

    let map, marker, accuracyCircle, currentPos = null;

    // --- Distance Helper ---
    function getDistance(lat1, lon1, lat2, lon2) {
        const R = 6371; // km
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;
        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        const km = R * c;
        return { km: km.toFixed(2), mi: (km * 0.621371).toFixed(2) };
    }

    // --- Main Update Logic ---
    async function updateDashboard(lat, lng, acc) {
        currentPos = { lat, lng };

        // 1. Address
        try {
            const res = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`);
            const data = await res.json();
            els.addr.textContent = data.display_name || "Unknown Address";
        } catch(e) { els.addr.textContent = "Address lookup failed"; }

        // 2. Weather
        try {
            const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&current=temperature_2m,wind_speed_10m`);
            const data = await res.json();
            const c = Math.round(data.current.temperature_2m);
            const f = Math.round((c * 9/5) + 32);
            const kph = Math.round(data.current.wind_speed_10m);
            const mph = Math.round(kph * 0.621371);
            els.temp.textContent = `${f}¬∞F / ${c}¬∞C`;
            els.wind.textContent = `${mph} mph / ${kph} km/h`;
        } catch(e) { els.temp.textContent = "N/A"; }

        // 3. Nearby Services
        try {
            const query = `[out:json][timeout:10];(node["amenity"~"police|hospital|fuel"](around:5000,${lat},${lng}););out body 10;`;
            const res = await fetch("https://overpass-api.de/api/interpreter", { method: "POST", body: query });
            const data = await res.json();
            
            const types = { police: "Police Station", hospital: "Hospital", fuel: "Gas Station" };
            let best = { police: null, hospital: null, fuel: null };

            data.elements.forEach(el => {
                const t = el.tags.amenity;
                const dist = getDistance(lat, lng, el.lat, el.lon);
                if (!best[t] || parseFloat(dist.km) < parseFloat(best[t].dist.km)) {
                    best[t] = { name: el.tags.name || "Local Facility", dist };
                }
            });

            els.nearby.innerHTML = "";
            Object.keys(best).forEach(k => {
                const item = best[k];
                const div = document.createElement("div");
                div.className = "nearby-item";
                div.innerHTML = item ? 
                    `<div class="nearby-type">${types[k]}</div>
                     <div class="nearby-name">${item.name}</div>
                     <div class="nearby-dist">${item.dist.mi} mi / ${item.dist.km} km</div>` :
                    `<div class="nearby-type">${types[k]}</div><div class="nearby-name" style="color:#555">None nearby</div>`;
                els.nearby.appendChild(div);
            });
        } catch(e) { console.log("Nearby Error"); }
    }

    // --- Initialization ---
    function initGPS() {
        if (!navigator.geolocation) { els.addr.textContent = "GPS not supported"; return; }

        navigator.geolocation.getCurrentPosition(pos => {
            const { latitude, longitude, accuracy } = pos.coords;
            
            els.lat.textContent = latitude.toFixed(5);
            els.lng.textContent = longitude.toFixed(5);
            els.acc.textContent = `Accuracy: ¬±${Math.round(accuracy)}m`;

            // Map Logic
            if (!map) {
                map = L.map("map", { zoomControl: false }).setView([latitude, longitude], 15);
                L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { maxZoom: 19 }).addTo(map);
                marker = L.marker([latitude, longitude]).addTo(map);
                accuracyCircle = L.circle([latitude, longitude], { radius: accuracy }).addTo(map);
            } else {
                map.setView([latitude, longitude], 15);
                marker.setLatLng([latitude, longitude]);
                accuracyCircle.setLatLng([latitude, longitude]);
                accuracyCircle.setRadius(accuracy);
            }

            updateDashboard(latitude, longitude, accuracy);
        }, 
        (err) => { els.addr.textContent = "Please enable Location Services."; }, 
        { enableHighAccuracy: true });

        // IP Info
        fetch("https://ipapi.co/json/").then(r=>r.json()).then(d=>{
            els.ip.textContent = d.ip;
            els.isp.textContent = d.org;
        });
    }

    // --- Button Handlers ---
    document.getElementById("refresh-btn").addEventListener("click", () => location.reload());
    
    document.getElementById("copy-coords-btn").addEventListener("click", () => {
        navigator.clipboard.writeText(`${els.lat.textContent}, ${els.lng.textContent}`);
        alert("Coordinates Copied!");
    });

    document.getElementById("copy-addr").addEventListener("click", () => {
        navigator.clipboard.writeText(els.addr.textContent);
        alert("Address Copied!");
    });

    document.getElementById("sos-btn").addEventListener("click", () => {
        if (!currentPos) return alert("Waiting for GPS...");
        const link = `https://www.google.com/maps?q=${currentPos.lat},${currentPos.lng}`;
        const msg = `EMERGENCY SOS: My location is ${link}`;
        
        if (navigator.share) {
            navigator.share({ title: 'SOS', text: msg, url: link });
        } else {
            window.location.href = `sms:?body=${encodeURIComponent(msg)}`;
        }
    });

    // Start
    initGPS();
</script>

</body>
</html>
