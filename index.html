<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5129097020907805" crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-5129097020907805">
    
    <meta charset="UTF-8" />
    <link rel="icon" href="favicon.ico" />
    <base href="/">
    
    <title>Tell My Location | Global GPS & Safety Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <meta name="description" content="Instantly find your exact location, address, and local weather. A private, fast safety tool for emergencies. No data storage. Features offline GPS and live sharing.">
    <meta name="keywords" content="tell my location, where am i, my gps coordinates, current address, emergency sos, location finder, weather near me, lat long converter">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://tellmylocation.com" />
    
    <meta property="og:title" content="Tell My Location | Global GPS Tool">
    <meta property="og:description" content="Get your exact GPS coordinates, address, and nearest emergency services instantly. Privacy-first, no data storage.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tellmylocation.com">
    <meta property="og:image" content="https://tellmylocation.com/icon.png"> 
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Tell My Location",
      "url": "https://tellmylocation.com",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "High-precision GPS coordinate finder with offline capabilities and emergency SOS messaging.",
      "featureList": "GPS Coordinates, Address Lookup, Weather, SOS Sharing, Nearby Services, Offline Mode"
    }
    </script>

    <style>
        :root {
            --card: rgba(13, 17, 23, 0.85);
            --accent: #ff0055;
            --neon-blue: #38bdf8;
            --sos-red: #ef4444;
            --text-main: #ffffff;
            --text-soft: #94a3b8;
            --border: rgba(255, 255, 255, 0.1);
            --success: #10b981;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #111827 100%);
            background-attachment: fixed;
            color: var(--text-main);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

       .shell { width: 100%; max-width: 800px; display: flex; flex-direction: column; gap: 16px; position: relative; z-index: 1; }

        /* NAVIGATION */
       .nav-menu {
            display: flex; justify-content: center; gap: 15px; margin-bottom: 20px;
            background: rgba(15, 23, 42, 0.8); padding: 12px 24px; border-radius: 50px; 
            border: 1px solid var(--border); backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            flex-wrap: wrap;
        }
       .nav-menu a { 
            color: var(--text-soft); text-decoration: none; font-size: 13px; 
            font-weight: 600; text-transform: uppercase; letter-spacing: 1px; 
            transition: all 0.3s; position: relative;
        }
       .nav-menu a:hover,.nav-menu a.active { color: var(--neon-blue); }
       .nav-menu a.active::after {
            content: ''; position: absolute; bottom: -4px; left: 0; width: 100%; height: 2px;
            background: var(--neon-blue); box-shadow: 0 0 8px var(--neon-blue);
        }

       .lang-switch { position: absolute; top: 0; right: 0; z-index: 10; }
        select#language {
            background: rgba(255,255,255,0.1); color: white; border: 1px solid var(--border);
            padding: 5px 10px; border-radius: 8px; font-size: 12px; cursor: pointer; outline: none;
        }
        select#language option { background: #0f172a; color: white; }

        body.rtl { direction: rtl; }

       .brand { text-align: center; margin: 20px 0 15px; } 
       .brand h1 { font-size: 28px; font-weight: 800; letter-spacing: -1px; margin-bottom: 6px; text-shadow: 0 4px 20px rgba(0,0,0,0.5); }
       .brand h1 span { color: var(--accent); }
       .tagline { color: var(--text-soft); font-size: 14px; font-weight: 400; }

        /* CARDS & UI COMPONENTS */
       .card {
            background: var(--card); backdrop-filter: blur(12px); border-radius: 24px;
            border: 1px solid var(--border); padding: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

       .address-box {
            background: rgba(56, 189, 248, 0.05); border: 1px solid rgba(56, 189, 248, 0.2);
            padding: 18px; border-radius: 16px; margin-bottom: 20px; text-align: center; position: relative;
        }
       .address-box h2 { font-size: 11px; color: var(--neon-blue); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 8px; font-weight: 700; }
        #full-address { font-size: 16px; font-weight: 600; line-height: 1.5; color: #fff; padding-right: 30px; word-break: break-word; }
        
       .icon-btn {
            background: none; border: none; cursor: pointer; color: var(--neon-blue);
            padding: 5px; display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s;
        }
       .icon-btn:hover { transform: scale(1.1); }
       .copy-abs { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); }

        #map { width: 100%; height: 320px; border-radius: 18px; border: 1px solid var(--border); margin-bottom: 20px; z-index: 1; }

       .data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-bottom: 24px; }
       .data-item {
            background: rgba(255,255,255,0.03); border: 1px solid var(--border);
            padding: 16px; border-radius: 16px; text-align: left;
        }
       .label { font-size: 10px; color: var(--text-soft); text-transform: uppercase; margin-bottom: 6px; letter-spacing: 0.5px; }
       .value { font-size: 16px; font-weight: 700; color: #fff; }
       .sub-value { font-size: 11px; color: var(--neon-blue); margin-top: 4px; }

       .nearby-header { font-size: 12px; text-transform: uppercase; color: var(--text-soft); margin-bottom: 10px; letter-spacing: 0.5px; display: flex; align-items: center; gap: 6px; }
       .nearby-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        @media(max-width: 600px) {.nearby-list { grid-template-columns: 1fr; } }
        
       .nearby-item {
            background: rgba(255,255,255,0.03); border: 1px solid var(--border);
            padding: 12px; border-radius: 12px;
        }
       .nearby-type { font-size: 9px; color: var(--accent); font-weight: 800; text-transform: uppercase; margin-bottom: 4px; }
       .nearby-name { font-size: 13px; font-weight: 600; color: #f1f5f9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
       .nearby-dist { font-size: 11px; color: var(--neon-blue); }

       .btn-stack { display: flex; flex-direction: column; gap: 12px; margin-top: 30px; }
       .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

       .btn {
            border: none; border-radius: 14px; padding: 16px; font-weight: 700; 
            cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: transform 0.1s;
        }
        
       .btn-sos { 
            background: var(--sos-red); color: white; width: 100%; font-size: 16px;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 12px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

       .btn-primary { background: linear-gradient(135deg, #ff0055, #ff4d7d); color: white; }
       .btn-ghost { background: rgba(255,255,255,0.05); color: white; border: 1px solid var(--border); }
       .btn:active { transform: scale(0.98); }
       .icon { width: 18px; height: 18px; stroke-width: 2.5; }

       .trust-badge { 
            font-size: 12px; color: #94a3b8; text-align: center; margin-top: 25px; line-height: 1.6;
            background: rgba(15, 23, 42, 0.5); padding: 15px; border-radius: 12px; border: 1px dashed var(--border);
        }
        
        footer { margin-top: 40px; text-align: center; font-size: 12px; color: var(--text-soft); padding-bottom: 30px; border-top: 1px solid var(--border); width: 100%; padding-top: 20px;}
        footer a { color: var(--text-soft); text-decoration: none; margin: 0 8px; transition: color 0.2s; }
        footer a:hover { color: white; }

        #cookie-banner {
            display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(30, 41, 59, 0.95); padding: 20px; border-radius: 16px; 
            border: 1px solid var(--neon-blue); 
            box-shadow: 0 10px 40px rgba(0,0,0,0.8); 
            width: 90%; max-width: 400px; z-index: 10000; text-align: center;
            backdrop-filter: blur(10px);
        }
        #cookie-text { margin-bottom: 15px; font-size: 13px; color: #cbd5e1; line-height: 1.5; }
        #cookie-btn {
            background: var(--neon-blue); color: #0f172a; border: none; padding: 10px 24px;
            border-radius: 50px; font-weight: 800; cursor: pointer; font-size: 14px;
        }

       .qr-section { text-align: center; margin-bottom: 25px; background: rgba(255,255,255,0.02); padding: 20px; border-radius: 20px; border: 1px solid var(--border); }
       .qr-label { font-size: 12px; text-transform: uppercase; letter-spacing: 2px; color: var(--neon-blue); margin-bottom: 10px; font-weight: 800; }
        #qrcode { display: inline-block; padding: 10px; background: white; border-radius: 12px; box-shadow: 0 0 20px rgba(56, 189, 248, 0.3); }

       .premium-dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin: 20px 0; }
       .p-card { 
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
            border: 1px solid var(--border); padding: 20px; border-radius: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); cursor: default;
        }
       .p-card:hover { border-color: var(--neon-blue); transform: scale(1.05); box-shadow: 0 10px 30px rgba(56,189,248,0.1); }
       .p-icon { font-size: 20px; margin-bottom: 10px; display: block; opacity: 0.8; }
       .p-label { font-size: 10px; text-transform: uppercase; color: var(--text-soft); }
       .p-value { font-size: 18px; font-weight: 800; color: white; display: block; margin-top: 5px; }

       .compass-wrap { 
            position: relative; width: 220px; height: 220px; margin: 30px auto;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.1) 0%, transparent 70%);
            border-radius: 50%; padding: 10px;
        }
        #compass-svg { width: 100%; height: 100%; transition: transform 0.1s linear; filter: drop-shadow(0 0 10px var(--neon-blue)); }
       .compass-ring { fill: none; stroke: var(--border); stroke-width: 2; }
       .compass-glow { fill: none; stroke: var(--neon-blue); stroke-width: 1; opacity: 0.5; }

        /* EXPLANATION PANELS (CONTENT ENGINE) */
       .info-panel {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin-top: 20px;
            overflow: hidden;
        }
       .info-header {
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer;
        }
       .info-header h3 { font-size: 16px; font-weight: 700; color: white; margin: 0; }
       .info-icon { font-size: 20px; color: var(--neon-blue); margin-right: 10px; }
       .info-body {
            padding: 20px;
            color: #cbd5e1;
            font-size: 15px;
            line-height: 1.7;
            display: none; /* Collapsed by default */
        }
       .info-body.open { display: block; animation: fadeIn 0.5s ease; }
       .info-body p { margin-bottom: 15px; }
       .info-body strong { color: white; }

        /* MODULES (Overlay) */
       .new-module-container { display: none; margin-top: 20px; padding: 20px; border-radius: 16px; background: rgba(0,0,0,0.3); border: 1px solid var(--border); text-align: left; }
       .new-module-container.active-mod { display: block; animation: slideDown 0.3s ease-out; }
        @keyframes slideDown { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

       .mod-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
       .mod-title { font-size: 16px; font-weight: 700; color: var(--neon-blue); text-transform: uppercase; letter-spacing: 1px; }
       .mod-close { cursor: pointer; color: var(--text-soft); font-size: 18px; background: none; border: none; }
        
       .mod-grid-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
       .mod-btn { padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: rgba(255,255,255,0.05); color: white; cursor: pointer; font-size: 13px; transition: 0.2s; }
       .mod-btn:hover { background: rgba(255,255,255,0.1); border-color: var(--neon-blue); }
       .mod-btn-primary { background: var(--neon-blue); color: #0f172a; border: none; font-weight: 700; }
       .mod-btn-danger { background: var(--sos-red); color: white; border: none; font-weight: 700; }

       .mod-input { width: 100%; padding: 12px; background: rgba(0,0,0,0.2); border: 1px solid var(--border); color: white; border-radius: 8px; margin-bottom: 10px; outline: none; }
       .mod-input:focus { border-color: var(--neon-blue); }

       .sos-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #3f0000; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; animation: sosFlash 1s infinite; }
        @keyframes sosFlash { 0% {background:#3f0000;} 50% {background:#7f1d1d;} 100% {background:#3f0000;} }
       .sos-msg { font-size: 24px; font-weight: 900; color: white; margin-bottom: 30px; text-align: center; padding: 20px; }
        
       .driver-hud { display: flex; justify-content: space-around; margin: 15px 0; background: rgba(0,0,0,0.4); padding: 15px; border-radius: 12px; }
       .hud-item { text-align: center; }
       .hud-val { font-size: 24px; font-weight: 800; color: white; display: block; }
       .hud-lbl { font-size: 10px; text-transform: uppercase; color: var(--text-soft); }

       .pin-list { margin-top: 10px; max-height: 150px; overflow-y: auto; }
       .pin-item { padding: 8px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; font-size: 12px; }
       .offline-badge { display: inline-block; padding: 4px 8px; background: #64748b; color: white; font-size: 10px; border-radius: 4px; margin-left: 10px; vertical-align: middle; display: none; }

       .hidden-page { display: none; margin-top: 20px; animation: fadeIn 0.5s ease; }
       .legal-content { color: #cbd5e1; font-size: 14px; line-height: 1.8; text-align: left; }
       .legal-content h2 { color: white; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
       .legal-content h3 { color: var(--neon-blue); margin-top: 20px; margin-bottom: 10px; font-size: 16px; }
    </style>
</head>
<body>

<div class="shell">

    <nav class="nav-menu">
        <a href="/" class="active">Home</a>
        <a href="/about">About</a>
        <a href="/privacy">Privacy</a>
        <a href="/terms">Terms</a>
        <a href="/contact">Contact</a>
    </nav>

    <div id="home-view">
        <div class="lang-switch">
            <select id="language" onchange="changeLanguage(this.value)">
                <option value="en">üá∫üá∏ English</option>
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="fr">üá´üá∑ Fran√ßais</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            </select>
        </div>

        <header class="brand">
            <h1>TELLMY<span>LOCATION</span>.COM <span id="offline-indicator" class="offline-badge">OFFLINE</span></h1>
            <p class="tagline" data-i18n="tagline">The fastest "Where am I?" tool on the internet.</p>
        </header>

        <div class="compass-wrap">
            <svg id="compass-svg" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="48" class="compass-ring"/>
                <circle cx="50" cy="50" r="45" class="compass-glow" stroke-dasharray="5,5"/>
                <text x="50" y="12" fill="#38bdf8" font-size="8" text-anchor="middle" font-weight="900">N</text>
                <text x="50" y="93" fill="#94a3b8" font-size="6" text-anchor="middle">S</text>
                <text x="88" y="52" fill="#94a3b8" font-size="6" text-anchor="middle">E</text>
                <text x="12" y="52" fill="#94a3b8" font-size="6" text-anchor="middle">W</text>
                <path d="M50 20 L55 50 L50 80 L45 50 Z" fill="#ff0055" />
                <circle cx="50" cy="50" r="3" fill="white" />
            </svg>
        </div>

        <main class="card">
            <div class="address-box">
                <h2 data-i18n="address_title">üìç Current Address</h2>
                <div id="full-address">Acquiring satellite lock...</div>
                <div style="font-size:10px; color:rgba(255,255,255,0.5); margin-top:5px;">(Tap copy icon to save)</div>
                
                <button class="icon-btn copy-abs" id="copy-addr" title="Copy Address">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                </button>
            </div>

            <div id="map"></div>

            <div class="card" style="margin-top: 15px; padding: 15px; border: 1px solid var(--border);">
                <h3 style="color:var(--neon-blue); font-size:14px; margin-bottom:15px;">üå¶Ô∏è Real-Time Weather</h3>
                <div id="weather-loading" style="color:var(--text-soft); font-size:12px;">Waiting for location...</div>
                <div id="weather-content" style="display:none;">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                        <div>
                            <div id="wx-temp" style="font-size:32px; font-weight:800; color:white;">--¬∞</div>
                            <div id="wx-desc" style="color:var(--text-soft); font-size:14px;">Unknown</div>
                        </div>
                        <div style="text-align:right; font-size:12px; color:#cbd5e1;">
                            <div>üí® Wind: <span id="wx-wind">--</span></div>
                            <div>üíß Hum: <span id="wx-hum">--</span></div>
                            <div>‚òÄÔ∏è UV: <span id="wx-uv">--</span></div>
                        </div>
                    </div>
                    <div style="font-size:11px; color:var(--text-soft); text-transform:uppercase; margin-bottom:10px;">24-Hour Forecast</div>
                    <div id="wx-hourly" style="display:flex; overflow-x:auto; gap:10px; padding-bottom:10px; scrollbar-width:thin;"></div>
                    <div style="margin-top:10px; font-size:9px; color:#64748b; text-align:right;">
                        <a href="https://open-meteo.com/" target="_blank" style="color:#64748b; text-decoration:none;">Weather data by Open-Meteo.com</a>
                    </div>
                </div>
            </div>

            <div class="premium-dashboard">
                <div class="p-card">
                    <span class="p-icon">üõ∞Ô∏è</span>
                    <span class="p-label">Altitude</span>
                    <span class="p-value" id="alt-p">‚Äî</span>
                </div>
                <div class="p-card">
                    <span class="p-icon">üß≠</span>
                    <span class="p-label">Bearing</span>
                    <span class="p-value" id="head-p">‚Äî</span>
                </div>
                <div class="p-card">
                    <span class="p-icon">üõ°Ô∏è</span>
                    <span class="p-label">Security</span>
                    <span class="p-value">Encrypted</span>
                </div>
                <div class="p-card">
                    <span class="p-icon">üïí</span>
                    <span class="p-label">Timestamp</span>
                    <span class="p-value" id="time-p">00:00:00</span>
                </div>
            </div>

            <div class="data-grid">
                <div class="data-item">
                    <div class="label" data-i18n="gps_label">üåç GPS Coordinates <span style="float:right; color:#10b981; font-weight:bold;">High Accuracy</span></div>
                    <div class="value"><span id="lat-val">‚Äî</span>, <span id="lng-val">‚Äî</span></div>
                    <div class="sub-value" id="accuracy-val">Waiting for signal...</div>
                    <div style="margin-top:8px; display:flex; gap:5px;">
                        <button class="mod-btn" style="padding:5px 10px; font-size:10px;" onclick="window.open('https://www.google.com/maps?q='+window.currentPos?.lat+','+window.currentPos?.lng)">Open Map</button>
                        <button class="mod-btn" style="padding:5px 10px; font-size:10px;" onclick="toggleModule('share-mod')">Share</button>
                    </div>
                </div>
                <div class="data-item">
                    <div class="label" data-i18n="ip_label">üåê Network IP</div>
                    <div class="value" id="ip-val" style="font-size:14px">‚Äî</div>
                    <div class="sub-value" id="isp-val">ISP: ‚Äî</div>
                </div>
            </div>

            <div class="nearby-header">
                <svg style="width:14px;height:14px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                <span data-i18n="nearby_label">üì° Nearest Emergency Services</span>
            </div>
            <div class="nearby-list" id="nearby-results">
                <div class="nearby-item">Searching local database...</div>
            </div>
            
            <div class="btn-stack">
                <button class="btn btn-sos" id="sos-btn">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                    <span data-i18n="btn_sos">ONE-TAP SOS SHARE</span>
                </button>
                <div class="btn-row">
                    <button class="btn btn-primary" id="refresh-btn">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                        <span data-i18n="btn_refresh">Refresh</span>
                    </button>
                    <button class="btn btn-ghost" id="copy-coords-btn">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        <span data-i18n="btn_copy">Copy Lat/Long</span>
                    </button>
                </div>
                
                <div class="btn-row" style="margin-top:10px;">
                    <button class="btn" onclick="toggleModule('driver-mod')" style="background:rgba(56, 189, 248, 0.15); color:#38bdf8; border:1px solid rgba(56, 189, 248, 0.3);">
                        <span>üöó Driver Mode</span>
                    </button>
                    <button class="btn" onclick="toggleModule('hiker-mod')" style="background:rgba(16, 185, 129, 0.15); color:#10b981; border:1px solid rgba(16, 185, 129, 0.3);">
                        <span>üå≤ Hiker Mode</span>
                    </button>
                </div>
                <div class="btn-row" style="margin-top:0px;">
                    <button class="btn" onclick="toggleModule('friend-mod')" style="background:rgba(255, 204, 0, 0.15); color:#fbbf24; border:1px solid rgba(255, 204, 0, 0.3);">
                        <span>ü§ù Meet Friend</span>
                    </button>
                    <button class="btn" onclick="toggleModule('share-mod')" style="background:rgba(255, 255, 255, 0.1); color:white; border:1px solid rgba(255, 255, 255, 0.3);">
                        <span>üîó Share Link</span>
                    </button>
                </div>
                <div class="btn-row">
                    <button class="btn" style="background:#10b981; color:white; padding:10px; font-size:12px; box-shadow:0 0 10px rgba(16,185,129,0.4);" onclick="window.open('https://buymeacoffee.com/donshehab')">
                        <svg class="icon" style="width:14px; height:14px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path></svg>
                        <span>Coffee</span>
                    </button>
                    <button class="btn" style="background:#ffcc00; color:black; font-weight:800; padding:10px; font-size:11px; box-shadow:0 0 15px rgba(255,204,0,0.6);" onclick="window.open('https://waterinmyspeaker.com')">
                        <span>CHECK OTHER TOOL</span>
                    </button>
                </div>
            </div>

            <div id="new-modules-container">
                <div id="driver-mod" class="new-module-container">
                    <div class="mod-header">
                        <span class="mod-title">Driver Dashboard</span>
                        <button class="mod-close" onclick="toggleModule('driver-mod')">‚úï</button>
                    </div>
                    <div class="driver-hud">
                        <div class="hud-item"><span class="hud-val" id="drv-speed">0</span><span class="hud-lbl">MPH</span></div>
                        <div class="hud-item"><span class="hud-val" id="drv-dir">--</span><span class="hud-lbl">Heading</span></div>
                    </div>
                    <div class="mod-grid-buttons">
                        <button class="mod-btn" onclick="openMapSearch('gas_station')">‚õΩ Gas Stations</button>
                        <button class="mod-btn" onclick="openMapSearch('parking')">üÖøÔ∏è Rest Stops</button>
                        <button class="mod-btn" onclick="shareETA()">‚è±Ô∏è Send ETA</button>
                        <button class="mod-btn" onclick="shareLocationSimple()">üìç Share Location</button>
                    </div>
                </div>

                <div id="hiker-mod" class="new-module-container">
                    <div class="mod-header">
                        <span class="mod-title">Hiker Tools</span>
                        <button class="mod-close" onclick="toggleModule('hiker-mod')">‚úï</button>
                    </div>
                    <div style="font-size:12px; color:#94a3b8; margin-bottom:10px;">Offline caching enabled. Pins saved locally.</div>
                    <div class="mod-grid-buttons">
                        <button class="mod-btn mod-btn-primary" onclick="dropPin()">üìç Drop Pin</button>
                        <button class="mod-btn" onclick="clearPins()">üóëÔ∏è Clear Pins</button>
                    </div>
                    <div id="pin-list" class="pin-list"></div>
                </div>

                <div id="friend-mod" class="new-module-container">
                    <div class="mod-header">
                        <span class="mod-title">Meet a Friend</span>
                        <button class="mod-close" onclick="toggleModule('friend-mod')">‚úï</button>
                    </div>
                    <input type="text" id="friend-input" class="mod-input" placeholder="Paste friend's coords (lat,lng) or link...">
                    <button class="mod-btn mod-btn-primary" style="width:100%" onclick="calcFriendDist()">Calculate Distance & Midpoint</button>
                    <div id="friend-res" style="margin-top:10px; font-size:14px; color:white;"></div>
                </div>

                <div id="share-mod" class="new-module-container">
                    <div class="mod-header">
                        <span class="mod-title">Share Location</span>
                        <button class="mod-close" onclick="toggleModule('share-mod')">‚úï</button>
                    </div>
                    <input type="text" id="share-url-input" class="mod-input" readonly>
                    <div class="mod-grid-buttons">
                        <button class="mod-btn mod-btn-primary" onclick="copyShareLink()">üìã Copy Link</button>
                        <button class="mod-btn" onclick="startLiveTrack()" id="live-trk-btn">üì° Start Live (15m)</button>
                    </div>
                    <div style="margin-top:15px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center;">
                        <button class="mod-btn" onclick="shareSocial('wa')">WhatsApp</button>
                        <button class="mod-btn" onclick="shareSocial('sms')">SMS</button>
                        <button class="mod-btn" onclick="shareSocial('tg')">Telegram</button>
                    </div>
                </div>
            </div>

            <section style="margin-top: 40px;">
                <h2 style="font-size:18px; color:white; margin-bottom:15px; border-bottom:1px solid var(--border); padding-bottom:10px;">Knowledge Base</h2>
                
                <div class="info-panel">
                    <div class="info-header" onclick="toggleInfo('tech-panel')">
                        <div style="display:flex; align-items:center;">
                            <span class="info-icon">üõ∞Ô∏è</span>
                            <h3>How GPS & Trilateration Work</h3>
                        </div>
                        <span id="icon-tech-panel">+</span>
                    </div>
                    <div id="tech-panel" class="info-body">
                        <article>
                            <p><strong>The Physics of Your Position:</strong> The coordinates displayed on your screen are not merely found; they are calculated through a complex geometric process known as <strong>trilateration</strong>. Unlike triangulation, which relies on measuring angles, trilateration relies entirely on distance measurement using the speed of light.</p>
                            <p>At this very moment, your device is receiving passive radio signals from a constellation of satellites orbiting approximately 20,000 kilometers above the Earth. Each signal contains two critical packets of data: the precise orbital location of the satellite (ephemeris data) and the exact microsecond the signal was transmitted.</p>
                            <p><strong>The Time-Flight Equation:</strong> Your receiver compares the transmission timestamp with the reception timestamp. Since radio waves travel at the speed of light (approx. 299,792,458 meters per second), the distance is derived using the formula: <em>Distance = Speed of Light √ó Time Difference</em>. This places you on the surface of a sphere centered on the satellite.</p>
                            <p><strong>Multi-Constellation GNSS:</strong> Modern devices utilize a Global Navigation Satellite System (GNSS) architecture. This includes GPS (USA), Galileo (EU), GLONASS (Russia), and BeiDou (China). By aggregating signals from over 30+ potential satellites, your device achieves sub-meter precision in ideal conditions, far surpassing legacy GPS capabilities.</p>
                        </article>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-header" onclick="toggleInfo('privacy-panel')">
                        <div style="display:flex; align-items:center;">
                            <span class="info-icon">üîí</span>
                            <h3>Privacy Architecture & Security</h3>
                        </div>
                        <span id="icon-privacy-panel">+</span>
                    </div>
                    <div id="privacy-panel" class="info-body">
                        <article>
                            <p><strong>Client-Side Processing:</strong> TellMyLocation.com operates on a "Zero-Knowledge" principle. The geolocation code runs entirely within your browser's sandbox (`navigator.geolocation` API). The raw coordinate data is processed in your device's RAM and rendered directly to the DOM.</p>
                            <p><strong>No Backend Storage:</strong> Unlike many tracking applications, we do not maintain a database of user movements. We do not have a backend server recording your coordinates. When you close this tab, your session data is instantly obliterated from memory. This architecture ensures that even in the event of a data request, there is no historical data to provide.</p>
                            <p><strong>Secure Transmission:</strong> All data is transmitted via HTTPS with TLS 1.3 encryption. When you use the "Share" feature, the link is generated locally. We urge users to share these links only via secure, end-to-end encrypted channels like Signal or WhatsApp to maintain chain-of-custody security over their location data.</p>
                        </article>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-header" onclick="toggleInfo('trouble-panel')">
                        <div style="display:flex; align-items:center;">
                            <span class="info-icon">‚ö†Ô∏è</span>
                            <h3>Troubleshooting Accuracy</h3>
                        </div>
                        <span id="icon-trouble-panel">+</span>
                    </div>
                    <div id="trouble-panel" class="info-body">
                        <article>
                            <p><strong>Understanding Drift:</strong> You may notice your "Speed" or "Coordinates" fluctuating even when you are standing still. This is known as GPS Drift, caused by atmospheric interference in the ionosphere bending the radio signals from space. In urban environments, "Multipath Error" occurs when signals bounce off skyscrapers before reaching your phone, confusing the calculation.</p>
                            <p><strong>Accuracy Radius:</strong> The "Accuracy" reading (e.g., ¬±5m) acts as a confidence interval. It means the receiver is 68% confident that your true location is within that radius. If your accuracy is low (e.g., >50m), you are likely relying on Wi-Fi triangulation or Cell Tower ID rather than true GPS. Move outdoors with a clear view of the sky to force a satellite lock.</p>
                            <p><strong>High-Accuracy Mode:</strong> This tool forces your browser into `enableHighAccuracy: true` mode. This consumes more battery but activates the dedicated GPS hardware antenna rather than relying on low-power network estimates. Ensure your device is not in "Power Saver" mode for best results.</p>
                        </article>
                    </div>
                </div>
            </section>

            <div class="qr-section">
                <div class="qr-label">Scan to Share Location</div>
                <div id="qrcode"></div>
            </div>

        </main>
    </div>

    <div id="sos-overlay" class="sos-overlay">
        <div class="sos-msg">EMERGENCY SOS ACTIVE</div>
        <button class="mod-btn" style="background:white; color:red; padding:20px 40px; font-size:18px;" onclick="stopSOS()">STOP ALARM</button>
        <div style="margin-top:20px; color:white;">Sharing location...</div>
    </div>

    <main id="about-page" class="card hidden-page">
        <div class="content-expansion" style="margin-top:0; border-top:none;">
            <h2>About TellMyLocation</h2>
            <article class="legal-content">
                <p>We are a team of privacy-focused developers and outdoor enthusiasts who realized that most location tools are either too complex, riddled with invasive tracking, or slow to load. Our mission was simple: build the fastest, cleanest, and most secure "Where Am I" utility on the web.</p>
                <h3>Our Philosophy</h3>
                <p>Data should serve the user, not the corporation. That is why TellMyLocation is built as a client-side application. We do not store your history. We do not build profiles. We simply give you the data you need‚ÄîCoordinates, Address, Weather‚Äîand then we get out of your way.</p>
                <h3>Technology Stack</h3>
                <p>Built on modern PWA standards, utilizing the HTML5 Geolocation API, OpenStreetMap for rendering, and Open-Meteo for hyper-local weather forecasting. Our infrastructure is edge-cached globally to ensure load times under 100ms anywhere in the world.</p>
            </article>
        </div>
    </main>

    <main id="privacy-page" class="card hidden-page">
        <div class="content-expansion" style="margin-top:0; border-top:none;">
            <h2>Privacy Policy</h2>
            <article class="legal-content">
                <p><strong>Last Updated: February 2026</strong></p>
                <p>Your privacy is non-negotiable. This policy outlines exactly how TellMyLocation.com handles your data in compliance with global standards.</p>
                
                <h3>1. Location Data Handling</h3>
                <p>We do not store, record, or transmit your GPS coordinates to any private server. Your location data is retrieved by your browser directly from your device's GPS hardware and is processed locally to display on your screen. The only time coordinates leave your device is when you explicitly use the "Share" or "SOS" features to generate a link.</p>

                <h3>2. Third-Party Services & APIs</h3>
                <p>We utilize trusted third-party APIs to provide specific functionality. <strong>OpenStreetMap</strong> is used for map tiles, and <strong>Open-Meteo</strong> is used for weather data. These services receive coordinate requests to generate maps/weather but do not receive your personal identity. Requests are anonymized where possible.</p>

                <h3>3. Cookies & Advertising (Google AdSense)</h3>
                <p>We use Google AdSense to serve advertisements. Google uses cookies to serve ads based on your prior visits to this website or other websites. You may opt-out of personalized advertising by visiting <a href="https://www.google.com/settings/ads" target="_blank" style="color:var(--neon-blue)">Google's Ads Settings</a>.</p>

                <h3>4. GDPR Rights (EEA Users)</h3>
                <p>If you are accessing this site from the European Economic Area (EEA), you have specific rights regarding your data:
                <ul style="list-style:inside; margin-left:10px;">
                    <li><strong>Right to Access:</strong> You may request details about the data we process (currently, we process no persistent personal data).</li>
                    <li><strong>Right to Erasure:</strong> Since we do not store location history, there is no data to delete after your session ends.</li>
                    <li><strong>Right to Complaint:</strong> You have the right to lodge a complaint with your local Data Protection Authority (DPA).</li>
                </ul>
                </p>

                <h3>5. CCPA/CPRA (California Residents)</h3>
                <p>We do not sell your personal information. Under the California Consumer Privacy Act (CCPA), you have the right to opt-out of the sale of personal data. Since we do not collect or sell data, no action is required. However, for ad personalization, you may use the "Do Not Sell My Personal Information" link in the footer (managed by Google AdSense settings).</p>
            </article>
        </div>
    </main>

    <main id="terms-page" class="card hidden-page">
        <div class="content-expansion" style="margin-top:0; border-top:none;">
            <h2>Terms of Use</h2>
            <article class="legal-content">
                <p><strong>1. Acceptance:</strong> By using TellMyLocation.com, you agree to these terms. If you do not agree, please close the application immediately.</p>
                <p><strong>2. Accuracy & Liability:</strong> This tool relies on device sensors and external APIs. We do not guarantee 100% accuracy. Do not rely on this tool for critical safety, aviation, or maritime navigation. We explicitly disclaim any warranties of fitness for a particular purpose.</p>
                <p><strong>3. Permitted Use:</strong> You may not scrape, reverse engineer, or use this tool for illegal tracking activities. This tool is intended for personal safety and utility purposes only.</p>
                <p><strong>4. Intellectual Property:</strong> The interface, design, and code are the property of TellMyLocation. Map tiles are ¬© OpenStreetMap contributors.</p>
            </article>
        </div>
    </main>

    <main id="contact-page" class="card hidden-page">
        <div class="content-expansion" style="margin-top:0; border-top:none;">
            <h2>Contact Us</h2>
            <article class="legal-content">
                <p>Have a suggestion, found a bug, or want to share how this tool helped you? We'd love to hear from you.</p>
                <h3>Get in Touch</h3>
                <p><strong>Email:</strong> support@tellmylocation.com</p>
                <p><strong>Business Hours:</strong> Mon-Fri, 9am - 5pm CST</p>
                <p>For technical support regarding the API integrations or map rendering, please include your device model and browser version in your email.</p>
                
                <h3>Mailing Address</h3>
                <p>TellMyLocation Legal Dept.<br>
                [Attn: Legal Compliance]<br>
                (Physical address available upon valid legal request)</p>
            </article>
        </div>
    </main>

    <footer>
        <div style="margin-bottom: 15px;">
            <a href="/privacy">Privacy Policy</a> ‚Ä¢ 
            <a href="/terms">Terms of Use</a> ‚Ä¢ 
            <a href="/contact">Contact Us</a>
        </div>
        <div style="font-size: 10px; color: var(--text-soft);">
            ¬© 2026 TellMyLocation.com | <a href="#" onclick="return false;" style="color:inherit; text-decoration: underline;">Do Not Sell My Personal Information</a>
        </div>
    </footer>

</div>

<div id="cookie-banner">
    <div id="cookie-text" data-i18n="cookie_text">We use cookies to analyze traffic and show personalized ads to support this free tool.</div>
    <button id="cookie-btn" onclick="acceptCookies()" data-i18n="btn_accept">I Accept</button>
</div>

<script>
    /* =========================================
       1. CORE ROUTER & ADSENSE TRIGGER
       ========================================= */
    const routeMap = {
        '/': 'home',
        '/about': 'about',
        '/privacy': 'privacy',
        '/contact': 'contact',
        '/terms': 'terms'
    };

    // Handle Back/Forward Buttons
    window.addEventListener('popstate', handleLocation);

    // Handle Initial Load
    document.addEventListener('DOMContentLoaded', () => {
        handleLocation();
        initApp(); // Start GPS
    });

    // Intercept Link Clicks for SPA Routing
    document.addEventListener('click', (e) => {
        const link = e.target.closest('a');
        if (link && link.getAttribute('href') && link.getAttribute('href').startsWith('/')) {
            e.preventDefault();
            const path = link.getAttribute('href');
            window.history.pushState({}, '', path);
            handleLocation();
        }
    });

    function handleLocation() {
        const path = window.location.pathname;
        const route = routeMap[path] |

| 'home';
        
        // Hide all views
        document.querySelectorAll('main.card, div#home-view').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.nav-menu a').forEach(el => el.classList.remove('active'));

        // Show active view
        if (route === 'home') {
            document.getElementById('home-view').style.display = 'block';
            document.querySelector('.nav-menu a[href="/"]').classList.add('active');
        } else {
            const page = document.getElementById(route + '-page');
            if(page) {
                page.style.display = 'block';
                const navLink = document.querySelector('.nav-menu a[href="/' + route + '"]');
                if(navLink) navLink.classList.add('active');
            }
        }
        
        // Refresh AdSense (Virtual Pageview)
        try {
            if(typeof adsbygoogle!== 'undefined') {
                (adsbygoogle = window.adsbygoogle ||).push({});
            }
        } catch(e) { console.log('AdSense refresh suppressed'); }

        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* =========================================
       2. EXPLANATION PANELS (Accordion)
       ========================================= */
    function toggleInfo(id) {
        const body = document.getElementById(id);
        const icon = document.getElementById('icon-' + id);
        if (body.style.display === 'block') {
            body.style.display = 'none';
            icon.innerText = '+';
        } else {
            body.style.display = 'block';
            icon.innerText = '‚àí';
        }
    }

    /* =========================================
       3. MODULE TOGGLERS (Driver/Hiker)
       ========================================= */
    function toggleModule(id) {
        document.querySelectorAll('.new-module-container').forEach(el => {
            if (el.id!== id) el.classList.remove('active-mod');
        });
        const mod = document.getElementById(id);
        mod.classList.toggle('active-mod');
        
        // Auto-populate share link
        if (id === 'share-mod' && window.currentPos) {
            document.getElementById('share-url-input').value = `https://tellmylocation.com/?lat=${window.currentPos.lat}&lng=${window.currentPos.lng}`;
        }
        // Enable driver stats
        if (id === 'driver-mod') enableDriverStats();
    }

    /* =========================================
       4. GPS & API LOGIC (Hardened)
       ========================================= */
    const els = {
        lat: document.getElementById("lat-val"),
        lng: document.getElementById("lng-val"),
        addr: document.getElementById("full-address"),
        acc: document.getElementById("accuracy-val"),
        temp: document.getElementById("temp-display"),
        wind: document.getElementById("wind-display"),
        ip: document.getElementById("ip-val"),
        isp: document.getElementById("isp-val"),
        nearby: document.getElementById("nearby-results")
    };

    let map, marker, circle;
    window.currentPos = null;

    function initApp() {
        // IP Lookup first (fastest)
        fetch("https://ipapi.co/json/").then(r=>r.json()).then(d=>{
            els.ip.textContent = d.ip;
            els.isp.textContent = d.org;
        }).catch(e => console.log('IP fetch failed'));

        // GPS Race Condition: Try High Accuracy, fallback to Low
        if (!navigator.geolocation) {
            els.addr.textContent = "GPS not supported on this device.";
            return;
        }

        const opts = { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 };
        navigator.geolocation.watchPosition(updatePos, handleErr, opts);
    }

    function updatePos(pos) {
        const { latitude, longitude, accuracy, altitude, speed, heading } = pos.coords;
        window.currentPos = { lat: latitude, lng: longitude };

        // DOM Updates
        els.lat.textContent = latitude.toFixed(5);
        els.lng.textContent = longitude.toFixed(5);
        els.acc.textContent = `¬±${Math.round(accuracy)}m`;
        document.getElementById('alt-p').textContent = altitude? Math.round(altitude) + 'm' : 'N/A';
        document.getElementById('head-p').textContent = heading? Math.round(heading) + '¬∞' : '‚Äî';

        // Driver Stats
        if (speed!== null) {
            document.getElementById('drv-speed').innerText = Math.round(speed * 2.23694); // m/s to mph
        }

        // Map Logic
        if (!map) {
            map = L.map("map", { zoomControl: false }).setView([latitude, longitude], 16);
            L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png", {
                maxZoom: 19,
                attribution: '&copy; OpenStreetMap'
            }).addTo(map);
            marker = L.marker([latitude, longitude]).addTo(map);
            circle = L.circle([latitude, longitude], { radius: accuracy, color: '#38bdf8' }).addTo(map);
        } else {
            marker.setLatLng([latitude, longitude]);
            circle.setLatLng([latitude, longitude]);
            circle.setRadius(accuracy);
            // Only center map if user hasn't moved it recently (Debounce UX)
            if(!window.userInteracting) map.setView([latitude, longitude], 16);
        }

        // Trigger External APIs (Debounced)
        fetchAddress(latitude, longitude);
        fetchWeather(latitude, longitude);
    }

    function handleErr(err) {
        if(err.code === 1) els.addr.textContent = "Location permission denied. Please enable in browser settings.";
        else els.addr.textContent = "Searching for satellites...";
    }

    /* =========================================
       5. EXTERNAL API HELPERS (Debounced)
       ========================================= */
    let lastGeocode = 0;
    async function fetchAddress(lat, lng) {
        const now = Date.now();
        if (now - lastGeocode < 5000) return; // Rate limit: 5s
        lastGeocode = now;

        try {
            // Using OpenStreetMap Nominatim
            const res = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`, {
                headers: { 'Accept-Language': 'en-US' }
            });
            const data = await res.json();
            els.addr.textContent = data.display_name |

| "Address not found";
        } catch(e) { console.log('Geocode error'); }
    }

    let lastWeather = 0;
    async function fetchWeather(lat, lng) {
        if (Date.now() - lastWeather < 600000) return; // Cache 10 mins
        lastWeather = Date.now();

        try {
            document.getElementById('weather-loading').style.display = 'none';
            document.getElementById('weather-content').style.display = 'block';
            
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m,uv_index&hourly=temperature_2m,weather_code&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=auto&forecast_days=1`;
            const res = await fetch(url);
            const data = await res.json();

            // Populate Weather Card
            const current = data.current;
            document.getElementById('wx-temp').textContent = Math.round(current.temperature_2m) + "¬∞F";
            document.getElementById('wx-wind').textContent = Math.round(current.wind_speed_10m) + " mph";
            document.getElementById('wx-hum').textContent = current.relative_humidity_2m + "%";
            document.getElementById('wx-uv').textContent = current.uv_index;
            document.getElementById('wx-desc').textContent = getWeatherDesc(current.weather_code);

            // Populate Hourly
            const hourlyDiv = document.getElementById('wx-hourly');
            hourlyDiv.innerHTML = '';
            const nowHour = new Date().getHours();
            for(let i=0; i<12; i++) {
                let idx = nowHour + i;
                if(idx >= data.hourly.time.length) break;
                const temp = Math.round(data.hourly.temperature_2m[idx]);
                const code = data.hourly.weather_code[idx];
                const el = document.createElement('div');
                el.style = "background:rgba(255,255,255,0.05); padding:10px; border-radius:8px; min-width:60px; text-align:center; flex-shrink:0;";
                el.innerHTML = `<div style="font-size:10px; color:#94a3b8;">+${i}h</div><div style="font-size:14px;">${getWeatherIcon(code)}</div><div style="font-size:12px; font-weight:700;">${temp}¬∞</div>`;
                hourlyDiv.appendChild(el);
            }
        } catch(e) { console.log('Weather Error'); }
    }

    function getWeatherDesc(code) {
        const codes = {0:'Clear', 1:'Mostly Clear', 2:'Partly Cloudy', 3:'Overcast', 45:'Fog', 51:'Drizzle', 61:'Rain', 71:'Snow', 95:'Thunderstorm'};
        return codes[code] |

| 'Unknown';
    }
    function getWeatherIcon(code) {
        if(code === 0) return '‚òÄÔ∏è';
        if(code < 3) return 'üå§Ô∏è';
        if(code < 50) return '‚òÅÔ∏è';
        if(code < 60) return 'üåßÔ∏è';
        if(code < 70) return 'üåßÔ∏è';
        if(code < 80) return '‚ùÑÔ∏è';
        return '‚õàÔ∏è';
    }

    /* =========================================
       6. UTILITIES (Copy, Share, SOS)
       ========================================= */
    document.getElementById("copy-coords-btn").addEventListener("click", () => {
        if(window.currentPos) {
            navigator.clipboard.writeText(`${window.currentPos.lat}, ${window.currentPos.lng}`);
            alert("Coordinates Copied!");
        }
    });
    
    function copyShareLink() {
        const input = document.getElementById('share-url-input');
        input.select();
        document.execCommand('copy');
        alert('Link copied to clipboard!');
    }

    function shareSocial(platform) {
        if (!window.currentPos) return alert("Waiting for location...");
        const url = `https://tellmylocation.com/?lat=${window.currentPos.lat}&lng=${window.currentPos.lng}`;
        const msg = `My current location: ${url}`;
        if (platform === 'wa') window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
        if (platform === 'sms') window.location.href = `sms:?body=${encodeURIComponent(msg)}`;
        if (platform === 'tg') window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent("My Location")}`, '_blank');
    }

    /* SOS LOGIC */
    let sosAudio;
    function triggerSOSMode() {
        document.getElementById('sos-overlay').style.display = 'flex';
        // Pulse vibration if supported
        if(navigator.vibrate) navigator.vibrate();
        // Auto share via Web Share API
        if (navigator.share && window.currentPos) {
            navigator.share({
                title: 'EMERGENCY SOS',
                text: 'I NEED HELP. My Location:',
                url: `https://tellmylocation.com/?lat=${window.currentPos.lat}&lng=${window.currentPos.lng}`
            }).catch(console.log);
        }
    }
    function stopSOS() {
        document.getElementById('sos-overlay').style.display = 'none';
        navigator.vibrate(0);
    }
    document.getElementById("sos-btn").addEventListener("click", triggerSOSMode);

    /* COOKIE LOGIC */
    function acceptCookies() {
        localStorage.setItem('cookiesAccepted', 'true');
        document.getElementById('cookie-banner').style.display = 'none';
    }
    if (!localStorage.getItem('cookiesAccepted')) {
        document.getElementById('cookie-banner').style.display = 'block';
    }

    /* QR CODE INIT */
    new QRCode(document.getElementById("qrcode"), {
        text: window.location.href,
        width: 100, height: 100,
        colorDark : "#000000", colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.H
    });

</script>
</body>
</html>
